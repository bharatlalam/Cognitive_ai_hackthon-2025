<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Investment Dashboard</title>
</head>
<body>
  <header>
    <h1>📈 Investments Overview</h1>
  </header>

  <main class="container">
    <!-- Market Overview Section -->
    <section class="market-overview">
      <div class="market-card nifty">
        <div class="market-icon">📊</div>
        <h4>NIFTY 50</h4>
        <p class="market-value">19,850.50</p>
        <p class="market-change positive">+125.30 (+0.63%)</p>
      </div>
      <div class="market-card sensex">
        <div class="market-icon">📈</div>
        <h4>SENSEX</h4>
        <p class="market-value">66,795.14</p>
        <p class="market-change positive">+428.75 (+0.65%)</p>
      </div>
      <div class="market-card gold">
        <div class="market-icon">🥇</div>
        <h4>GOLD</h4>
        <p class="market-value">₹6,245</p>
        <p class="market-change negative">-12.50 (-0.20%)</p>
      </div>
      <div class="market-card crypto">
        <div class="market-icon">₿</div>
        <h4>BITCOIN</h4>
        <p class="market-value">$67,832</p>
        <p class="market-change positive">+1,245 (+1.87%)</p>
      </div>
    </section>

    <!-- Investment Cards with Icons -->
    <section class="investment-cards">
      <div class="card stocks-card">
        <div class="card-header">
          <div class="card-icon">🏢</div>
          <h3>Stock Portfolio</h3>
        </div>
        <div class="card-content">
          <p>Total Value: ₹45,000</p>
          <p>Gain/Loss: +₹3,200</p>
          <div class="investment-details">
            <small>Top Holdings: TCS, Infosys, HDFC Bank</small>
          </div>
        </div>
      </div>
      <div class="card mf-card">
        <div class="card-header">
          <div class="card-icon">📊</div>
          <h3>Mutual Funds</h3>
        </div>
        <div class="card-content">
          <p>Total Value: ₹20,000</p>
          <p>Gain/Loss: -₹500</p>
          <div class="investment-details">
            <small>SBI Blue Chip, ICICI Prudential</small>
          </div>
        </div>
      </div>
      <div class="card sip-card">
        <div class="card-header">
          <div class="card-icon">💰</div>
          <h3>SIPs</h3>
        </div>
        <div class="card-content">
          <p>Total Invested: ₹10,000</p>
          <p>Return: ₹12,000 (+20%)</p>
          <div class="investment-details">
            <small>Monthly: ₹2,500 | Duration: 4 months</small>
          </div>
        </div>
      </div>
      <div class="card bonds-card">
        <div class="card-header">
          <div class="card-icon">🏛</div>
          <h3>Bonds & FDs</h3>
        </div>
        <div class="card-content">
          <p>Total Value: ₹15,000</p>
          <p>Interest Rate: 7.2% p.a.</p>
          <div class="investment-details">
            <small>Government Bonds, Bank FDs</small>
          </div>
        </div>
      </div>
    </section>

    <section class="chart-section">
      <h2>📈 Asset Distribution</h2>
      <div class="chart-container">
        <canvas id="investmentChart" width="300" height="300"></canvas>
      </div>
    </section>

    <!-- Goals and Performance Section -->
    <section class="goals-performance">
      <div class="goals-section">
        <h2>🎯 Investment Goals</h2>
        <div class="goal-item">
          <div class="goal-info">
            <span class="goal-icon">🏠</span>
            <div class="goal-text">
              <h4>Dream Home</h4>
              <p>Target: ₹50,00,000</p>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 23%"></div>
          </div>
          <span class="progress-text">23% Complete</span>
        </div>
        <div class="goal-item">
          <div class="goal-info">
            <span class="goal-icon">🎓</span>
            <div class="goal-text">
              <h4>Child Education</h4>
              <p>Target: ₹25,00,000</p>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 45%"></div>
          </div>
          <span class="progress-text">45% Complete</span>
        </div>
        <div class="goal-item">
          <div class="goal-info">
            <span class="goal-icon">🌴</span>
            <div class="goal-text">
              <h4>Retirement Fund</h4>
              <p>Target: ₹2,00,00,000</p>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 8%"></div>
          </div>
          <span class="progress-text">8% Complete</span>
        </div>
      </div>
      
      <div class="performance-metrics">
        <h2>📊 Performance Metrics</h2>
        <div class="metric-cards">
          <div class="metric-card">
            <div class="metric-icon">📈</div>
            <h4>Portfolio Return</h4>
            <p class="metric-value positive">+12.5%</p>
            <small>Last 12 months</small>
          </div>
          <div class="metric-card">
            <div class="metric-icon">⚖</div>
            <h4>Risk Level</h4>
            <p class="metric-value moderate">Moderate</p>
            <small>Risk Assessment</small>
          </div>
          <div class="metric-card">
            <div class="metric-icon">🎯</div>
            <h4>Asset Allocation</h4>
            <p class="metric-value">Balanced</p>
            <small>60% Equity, 40% Debt</small>
          </div>
          <div class="metric-card">
            <div class="metric-icon">💎</div>
            <h4>Diversification</h4>
            <p class="metric-value positive">Good</p>
            <small>8 different sectors</small>
          </div>
        </div>
      </div>
    </section>

    <section class="suggestions">
      <h2>💡 Smart Suggestions</h2>
      <ul>
        <li>📊 Diversify beyond tech-sector stocks</li>
        <li>💰 Increase SIP allocation for long-term goals</li>
        <li>📈 Monitor mutual fund performance quarterly</li>
        <li>⚖ Rebalance portfolio every 6 months</li>
        <li>🏦 Consider adding debt funds for stability</li>
        <li>🌍 Explore international diversification</li>
      </ul>
    </section>

    <!-- Market News & Insights -->
    <section class="news-insights">
      <div class="news-section">
        <h2>📰 Market News</h2>
        <div class="news-item">
          <div class="news-icon">📈</div>
          <div class="news-content">
            <h4>IT Sector Shows Strong Growth</h4>
            <p>Technology stocks surge 3.2% amid positive earnings reports</p>
            <small>2 hours ago</small>
          </div>
        </div>
        <div class="news-item">
          <div class="news-icon">🏦</div>
          <div class="news-content">
            <h4>RBI Maintains Repo Rate</h4>
            <p>Central bank keeps interest rates unchanged at 6.5%</p>
            <small>1 day ago</small>
          </div>
        </div>
        <div class="news-item">
          <div class="news-icon">🥇</div>
          <div class="news-content">
            <h4>Gold Prices Decline</h4>
            <p>Precious metals face pressure from strong dollar</p>
            <small>3 hours ago</small>
          </div>
        </div>
      </div>
      
      <div class="insights-section">
        <h2>🔮 AI Insights</h2>
        <div class="insight-card bullish">
          <div class="insight-header">
            <span class="insight-icon">🐂</span>
            <h4>Bullish Signal</h4>
          </div>
          <p>Your tech portfolio shows strong momentum. Consider booking partial profits.</p>
        </div>
        <div class="insight-card neutral">
          <div class="insight-header">
            <span class="insight-icon">📊</span>
            <h4>Rebalancing Due</h4>
          </div>
          <p>Portfolio allocation has drifted. Consider rebalancing within 30 days.</p>
        </div>
        <div class="insight-card positive">
          <div class="insight-header">
            <span class="insight-icon">✨</span>
            <h4>Opportunity</h4>
          </div>
          <p>Healthcare sector showing value opportunities for long-term growth.</p>
        </div>
      </div>
    </section>

    <section class="interactive-section">
      <div class="quick-actions">
        <h2>⚡ Quick Actions</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="simulateMarketBurst()">📈 Market Boost</button>
          <button class="action-btn" onclick="simulateMarketDip()">📉 Market Dip</button>
          <button class="action-btn" onclick="resetToOriginal()">🔄 Reset Values</button>
          <button class="action-btn" onclick="toggleRealTime()">⏸ Pause Updates</button>
          <button class="action-btn download-btn" onclick="downloadReport()">📄 Download Report</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Enhanced Chatbot -->
  <div class="chatbot-container" id="chatbotContainer">
    <div class="chatbot-header" onclick="toggleChat()">
      <div class="chatbot-header-left">
        <span class="chatbot-avatar">🤖</span>
        <div class="chatbot-status">
          <span class="chatbot-title">Investment Assistant</span>
          <span class="chatbot-online">● Online</span>
        </div>
      </div>
      <div class="chatbot-actions">
        <button class="chat-action-btn" onclick="clearChat()" title="Clear Chat">🗑</button>
        <button class="chat-action-btn" onclick="toggleChat()" title="Minimize" id="minimizeBtn">−</button>
      </div>
    </div>
    
    <!-- Quick Suggestions -->
    <div class="chat-suggestions" id="chatSuggestions">
      <div class="suggestion-chips">
        <button class="suggestion-chip" onclick="askQuestion('What is my portfolio performance?')">📊 Portfolio Performance</button>
        <button class="suggestion-chip" onclick="askQuestion('Give me investment advice')">💡 Investment Tips</button>
        <button class="suggestion-chip" onclick="askQuestion('How are my goals progressing?')">🎯 Goal Progress</button>
        <button class="suggestion-chip" onclick="askQuestion('What should I invest in next?')">🚀 Next Investment</button>
      </div>
    </div>
    
    <div class="chatbot-messages" id="chatMessages">
      <div class="message bot-message">
        <div class="message-avatar">🤖</div>
        <div class="message-content">
          <p>Hi! I'm your AI Investment Assistant. I can help you with:</p>
          <ul>
            <li>📊 Portfolio analysis & performance</li>
            <li>💰 Investment strategies & advice</li>
            <li>🎯 Goal tracking & planning</li>
            <li>📈 Market insights & trends</li>
          </ul>
          <p>Try the quick suggestions above or ask me anything!</p>
        </div>
      </div>
    </div>
    
    <div class="chatbot-input">
      <div class="input-container">
        <input type="text" id="userInput" placeholder="Ask me about investments, portfolio, goals..." onkeypress="handleEnter(event)">
        <button class="send-btn" onclick="sendMessage()" title="Send Message">
          <span class="send-icon">➤</span>
        </button>
      </div>
      <div class="typing-indicator" id="typingIndicator" style="display: none;">
        <span class="typing-dot"></span>
        <span class="typing-dot"></span>
        <span class="typing-dot"></span>
        <span class="typing-text">Assistant is typing...</span>
      </div>
    </div>
  </div>

  <!-- Enhanced Floating Chat Button -->
  <div class="chat-toggle" onclick="toggleChat()" id="chatToggle">
    <div class="chat-toggle-icon">💬</div>
    <div class="notification-badge" id="chatNotification">1</div>
  </div>

  <script src="script_new.js"></script>
</body>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
  color: #333;
  margin: 0;
  padding: 0;
  min-height: 100vh;
}

/* Background patterns */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(255,255,255,0.05) 0%, transparent 50%);
  pointer-events: none;
  z-index: -1;
}

header {
  background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
  color: white;
  padding: 25px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  position: relative;
  overflow: hidden;
}

header::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: shimmer 3s infinite;
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

header h1 {
  margin: 0;
  font-size: 2.5em;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.container {
  padding: 30px;
  max-width: 1400px;
  margin: 0 auto;
}

/* Market Overview Section */
.market-overview {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.market-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 8px 32px rgba(0,0,0,0.1);
  border: 1px solid rgba(255,255,255,0.2);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.market-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
}

.market-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
}

.market-icon {
  font-size: 2em;
  margin-bottom: 10px;
}

.market-card h4 {
  margin: 0 0 10px 0;
  color: #2c3e50;
  font-weight: 600;
}

.market-value {
  font-size: 1.5em;
  font-weight: bold;
  margin: 10px 0;
  color: #2c3e50;
}

.market-change {
  font-weight: 600;
  font-size: 0.9em;
}

.market-change.positive {
  color: #27ae60;
}

.market-change.negative {
  color: #e74c3c;
}

/* Enhanced Investment Cards */
.investment-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 25px;
  margin-bottom: 30px;
}

.card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  padding: 25px;
  transition: all 0.3s ease;
  border: 1px solid rgba(255,255,255,0.2);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 5px;
}

.stocks-card::before {
  background: linear-gradient(90deg, #667eea, #764ba2);
}

.mf-card::before {
  background: linear-gradient(90deg, #f093fb, #f5576c);
}

.sip-card::before {
  background: linear-gradient(90deg, #4facfe, #00f2fe);
}

.bonds-card::before {
  background: linear-gradient(90deg, #43e97b, #38f9d7);
}

.card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.card-header {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
}

.card-icon {
  font-size: 2.5em;
  margin-right: 15px;
}

.card-header h3 {
  margin: 0;
  color: #2c3e50;
  font-weight: 600;
}

.card-content p {
  margin: 10px 0;
  font-weight: 500;
}

.investment-details {
  margin-top: 15px;
  padding: 10px;
  background: rgba(52, 152, 219, 0.1);
  border-radius: 8px;
  border-left: 3px solid #3498db;
}

.investment-details small {
  color: #7f8c8d;
  font-style: italic;
}

.chart-section {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 30px;
  border-radius: 20px;
  margin-bottom: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  border: 1px solid rgba(255,255,255,0.2);
}

.chart-section h2 {
  text-align: center;
  color: #2c3e50;
  margin-bottom: 25px;
  font-weight: 600;
}

.chart-container {
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 300px;
  max-height: 300px;
  margin: 0 auto;
}

/* Goals and Performance Section */
.goals-performance {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-bottom: 30px;
}

.goals-section, .performance-metrics {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  border: 1px solid rgba(255,255,255,0.2);
}

.goals-section h2, .performance-metrics h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-weight: 600;
}

.goal-item {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(52, 152, 219, 0.05);
  border-radius: 12px;
  border-left: 4px solid #3498db;
}

.goal-info {
  display: flex;
  align-items: center;
  flex: 1;
}

.goal-icon {
  font-size: 2em;
  margin-right: 15px;
}

.goal-text h4 {
  margin: 0 0 5px 0;
  color: #2c3e50;
}

.goal-text p {
  margin: 0;
  color: #7f8c8d;
  font-size: 0.9em;
}

.progress-bar {
  width: 120px;
  height: 8px;
  background: #ecf0f1;
  border-radius: 4px;
  margin: 0 15px;
  overflow: hidden;
}

.progress {
  height: 100%;
  background: linear-gradient(90deg, #3498db, #2ecc71);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 0.8em;
  color: #7f8c8d;
  font-weight: 600;
}

.metric-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.metric-card {
  text-align: center;
  padding: 20px;
  background: rgba(52, 152, 219, 0.05);
  border-radius: 12px;
  border: 1px solid rgba(52, 152, 219, 0.1);
  transition: all 0.3s ease;
}

.metric-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.metric-icon {
  font-size: 2em;
  margin-bottom: 10px;
}

.metric-card h4 {
  margin: 0 0 10px 0;
  color: #2c3e50;
  font-size: 0.9em;
}

.metric-value {
  font-size: 1.2em;
  font-weight: bold;
  margin: 5px 0;
}

.metric-value.positive {
  color: #27ae60;
}

.metric-value.moderate {
  color: #f39c12;
}

.metric-card small {
  color: #7f8c8d;
  font-size: 0.8em;
}

.suggestions {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 25px;
  border-left: 5px solid #27ae60;
  border-radius: 15px;
  margin-bottom: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.suggestions h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-weight: 600;
}

.suggestions ul {
  padding-left: 25px;
  list-style: none;
}

.suggestions li {
  margin-bottom: 12px;
  padding: 10px;
  background: rgba(39, 174, 96, 0.05);
  border-radius: 8px;
  border-left: 3px solid #27ae60;
  transition: all 0.3s ease;
}

.suggestions li:hover {
  background: rgba(39, 174, 96, 0.1);
  transform: translateX(5px);
}

/* News and Insights Section */
.news-insights {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-bottom: 30px;
}

.news-section, .insights-section {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  border: 1px solid rgba(255,255,255,0.2);
}

.news-section h2, .insights-section h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-weight: 600;
}

.news-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(52, 152, 219, 0.05);
  border-radius: 12px;
  border-left: 4px solid #3498db;
  transition: all 0.3s ease;
}

.news-item:hover {
  background: rgba(52, 152, 219, 0.1);
  transform: translateX(5px);
}

.news-icon {
  font-size: 1.5em;
  margin-right: 15px;
  margin-top: 5px;
}

.news-content h4 {
  margin: 0 0 8px 0;
  color: #2c3e50;
  font-size: 1em;
}

.news-content p {
  margin: 0 0 8px 0;
  color: #7f8c8d;
  font-size: 0.9em;
  line-height: 1.4;
}

.news-content small {
  color: #95a5a6;
  font-size: 0.8em;
}

.insight-card {
  margin-bottom: 15px;
  padding: 20px;
  border-radius: 15px;
  border: 1px solid;
  transition: all 0.3s ease;
}

.insight-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.insight-card.bullish {
  background: rgba(39, 174, 96, 0.05);
  border-color: #27ae60;
}

.insight-card.neutral {
  background: rgba(241, 196, 15, 0.05);
  border-color: #f1c40f;
}

.insight-card.positive {
  background: rgba(52, 152, 219, 0.05);
  border-color: #3498db;
}

.insight-header {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.insight-icon {
  font-size: 1.5em;
  margin-right: 10px;
}

.insight-header h4 {
  margin: 0;
  color: #2c3e50;
  font-size: 1em;
}

.insight-card p {
  margin: 0;
  color: #7f8c8d;
  font-size: 0.9em;
  line-height: 1.4;
}

/* Interactive Section */
.interactive-section {
  margin-bottom: 30px;
}

.quick-actions {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.action-buttons {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  margin-top: 15px;
}

.action-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.3s ease;
  min-width: 120px;
}

.action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.action-btn:active {
  transform: translateY(0);
}

.download-btn {
  background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%) !important;
}

.download-btn:hover {
  box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4) !important;
}

/* Enhanced Chatbot Styles */
.chat-toggle {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
  transition: all 0.3s ease;
  z-index: 1000;
  position: relative;
  border: 3px solid rgba(255, 255, 255, 0.2);
}

.chat-toggle:hover {
  transform: scale(1.1);
  box-shadow: 0 12px 40px rgba(102, 126, 234, 0.6);
}

.chat-toggle-icon {
  font-size: 28px;
  transition: transform 0.3s ease;
}

.chat-toggle:hover .chat-toggle-icon {
  transform: scale(1.1);
}

.notification-badge {
  position: absolute;
  top: -5px;
  right: -5px;
  background: #e74c3c;
  color: white;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
  border: 2px solid white;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.chatbot-container {
  position: fixed;
  bottom: 120px;
  right: 30px;
  width: 400px;
  height: 550px;
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  display: none;
  flex-direction: column;
  z-index: 1001;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.3);
}

.chatbot-container.open {
  display: flex;
  animation: slideInUp 0.4s ease-out;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.chatbot-header {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  padding: 20px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  overflow: hidden;
}

.chatbot-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: shimmer 3s infinite;
}

.chatbot-header-left {
  display: flex;
  align-items: center;
}

.chatbot-avatar {
  font-size: 2em;
  margin-right: 12px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-5px); }
  60% { transform: translateY(-3px); }
}

.chatbot-status {
  display: flex;
  flex-direction: column;
}

.chatbot-title {
  font-weight: 600;
  font-size: 1.1em;
}

.chatbot-online {
  font-size: 0.8em;
  color: #a8f5a8;
  font-weight: 500;
}

.chatbot-actions {
  display: flex;
  gap: 8px;
}

.chat-action-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 35px;
  height: 35px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  font-size: 14px;
}

.chat-action-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

/* Chat Suggestions */
.chat-suggestions {
  background: rgba(102, 126, 234, 0.05);
  padding: 15px;
  border-bottom: 1px solid rgba(102, 126, 234, 0.1);
}

.suggestion-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.suggestion-chip {
  background: rgba(102, 126, 234, 0.1);
  border: 1px solid rgba(102, 126, 234, 0.2);
  color: #667eea;
  padding: 8px 12px;
  border-radius: 20px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.suggestion-chip:hover {
  background: #667eea;
  color: white;
  transform: translateY(-2px);
}

.chatbot-messages {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  background: rgba(248, 249, 250, 0.8);
  backdrop-filter: blur(10px);
}

.message {
  margin-bottom: 20px;
  display: flex;
  align-items: flex-start;
  animation: messageSlideIn 0.4s ease;
}

.message-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  margin-right: 12px;
  flex-shrink: 0;
}

.bot-message .message-avatar {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

.user-message .message-avatar {
  background: linear-gradient(135deg, #42a5f5, #1e88e5);
  color: white;
}

.message-content {
  flex: 1;
  background: white;
  padding: 15px 18px;
  border-radius: 18px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  position: relative;
  max-width: 85%;
}

.bot-message .message-content {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.05));
  border: 1px solid rgba(102, 126, 234, 0.1);
}

.user-message {
  flex-direction: row-reverse;
}

.user-message .message-avatar {
  margin-left: 12px;
  margin-right: 0;
}

.user-message .message-content {
  background: linear-gradient(135deg, #42a5f5, #1e88e5);
  color: white;
}

.message-content::before {
  content: '';
  position: absolute;
  top: 10px;
  width: 0;
  height: 0;
  border: 8px solid transparent;
}

.bot-message .message-content::before {
  left: -15px;
  border-right-color: rgba(102, 126, 234, 0.1);
}

.user-message .message-content::before {
  right: -15px;
  border-left-color: #42a5f5;
}

.message-content p {
  margin: 0 0 10px 0;
  line-height: 1.5;
}

.message-content p:last-child {
  margin-bottom: 0;
}

.message-content ul {
  margin: 10px 0;
  padding-left: 20px;
}

.message-content li {
  margin-bottom: 5px;
  line-height: 1.4;
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.chatbot-input {
  padding: 20px;
  background: white;
  border-top: 1px solid rgba(0,0,0,0.1);
}

.input-container {
  display: flex;
  align-items: center;
  background: rgba(248, 249, 250, 0.8);
  border-radius: 25px;
  padding: 5px;
  border: 2px solid transparent;
  transition: all 0.3s ease;
}

.input-container:focus-within {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.chatbot-input input {
  flex: 1;
  padding: 12px 18px;
  border: none;
  border-radius: 25px;
  outline: none;
  font-size: 14px;
  background: transparent;
  color: #333;
}

.chatbot-input input::placeholder {
  color: #999;
}

.send-btn {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  margin-left: 8px;
}

.send-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.send-icon {
  font-size: 16px;
  transform: rotate(-45deg);
}

/* Typing Indicator */
.typing-indicator {
  display: flex;
  align-items: center;
  margin-top: 10px;
  color: #999;
  font-size: 12px;
}

.typing-dot {
  width: 6px;
  height: 6px;
  background: #667eea;
  border-radius: 50%;
  margin: 0 2px;
  animation: typingDot 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typingDot {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

.typing-text {
  margin-left: 8px;
  font-style: italic;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 20px;
  }
  
  .market-overview {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
  }
  
  .investment-cards {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .goals-performance {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .news-insights {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .metric-cards {
    grid-template-columns: 1fr;
  }
  
  .chatbot-container {
    width: 95%;
    right: 2.5%;
    bottom: 100px;
    height: 500px;
  }
  
  .chat-toggle {
    width: 60px;
    height: 60px;
    bottom: 20px;
    right: 20px;
  }
  
  .chat-toggle-icon {
    font-size: 24px;
  }
  
  .suggestion-chips {
    flex-direction: column;
    gap: 6px;
  }
  
  .suggestion-chip {
    text-align: center;
  }
  
  .action-buttons {
    justify-content: center;
  }
  
  .action-btn {
    min-width: 100px;
    font-size: 12px;
    padding: 10px 15px;
  }
  
  header h1 {
    font-size: 2em;
  }
  
  .goal-item {
    flex-direction: column;
    text-align: center;
  }
  
  .progress-bar {
    width: 80%;
    margin: 10px 0;
  }
  
  .news-item {
    flex-direction: column;
    text-align: center;
  }
  
  .news-icon {
    margin: 0 0 10px 0;
  }
}

@media (max-width: 480px) {
  .market-overview {
    grid-template-columns: 1fr;
  }
  
  .market-card {
    padding: 15px;
  }
  
  .card {
    padding: 20px;
  }
  
  .card-header {
    flex-direction: column;
    text-align: center;
  }
  
  .card-icon {
    margin: 0 0 10px 0;
  }
}

/* Additional animations and effects */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.market-card, .card, .chart-section, .suggestions, .news-insights > div, .goals-performance > div {
  animation: fadeInUp 0.6s ease forwards;
}

.market-card:nth-child(1) { animation-delay: 0.1s; }
.market-card:nth-child(2) { animation-delay: 0.2s; }
.market-card:nth-child(3) { animation-delay: 0.3s; }
.market-card:nth-child(4) { animation-delay: 0.4s; }

.card:nth-child(1) { animation-delay: 0.5s; }
.card:nth-child(2) { animation-delay: 0.6s; }
.card:nth-child(3) { animation-delay: 0.7s; }
.card:nth-child(4) { animation-delay: 0.8s; }

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #667eea, #764ba2);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #764ba2, #667eea);
}
</style>
<script>
    const ctx = document.getElementById('investmentChart').getContext('2d');

// Initial data - including bonds
let stockValue = 45000;
let mutualFundValue = 20000;
let sipValue = 12000;
let bondsValue = 15000;
let isRealTimeActive = true;
let updateInterval;
let chatNotificationCount = 1;
let isTyping = false;

// Original values for reset functionality
const originalValues = {
  stock: 45000,
  mutualFund: 20000,
  sip: 12000,
  bonds: 15000
};

const investmentChart = new Chart(ctx, {
  type: 'doughnut',
  data: {
    labels: ['Stocks', 'Mutual Funds', 'SIPs', 'Bonds & FDs'],
    datasets: [{
      label: 'Asset Distribution',
      data: [stockValue, mutualFundValue, sipValue, bondsValue],
      backgroundColor: ['#667eea', '#f093fb', '#4facfe', '#43e97b'],
      borderWidth: 3,
      borderColor: ['#764ba2', '#f5576c', '#00f2fe', '#38f9d7']
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: true,
    plugins: {
      legend: {
        position: 'bottom',
        labels: {
          padding: 20,
          font: {
            size: 12
          },
          usePointStyle: true,
          pointStyle: 'circle'
        }
      }
    },
    animation: {
      animateRotate: true,
      animateScale: true,
      duration: 1000
    }
  }
});

// Function to simulate real-time data updates
function updateInvestmentData() {
  if (!isRealTimeActive) return;
  
  // Simulate small random changes in investment values
  const stockChange = (Math.random() - 0.5) * 1000; // ±500
  const mutualFundChange = (Math.random() - 0.5) * 400; // ±200
  const sipChange = (Math.random() - 0.5) * 200; // ±100
  const bondsChange = (Math.random() - 0.5) * 100; // ±50 (more stable)
  
  stockValue = Math.max(0, stockValue + stockChange);
  mutualFundValue = Math.max(0, mutualFundValue + mutualFundChange);
  sipValue = Math.max(0, sipValue + sipChange);
  bondsValue = Math.max(0, bondsValue + bondsChange);
  
  updateChartAndCards();
}

// Function to update chart and cards
function updateChartAndCards() {
  // Update chart data
  investmentChart.data.datasets[0].data = [
    Math.round(stockValue),
    Math.round(mutualFundValue),
    Math.round(sipValue),
    Math.round(bondsValue)
  ];
  
  // Update the chart
  investmentChart.update('active');
  
  // Update the cards with new values
  updateCards();
}

// Function to update the investment cards
function updateCards() {
  const cards = document.querySelectorAll('.card');
  
  // Update Stock Portfolio card
  const stockCard = cards[0];
  const stockGainLoss = stockValue - originalValues.stock;
  stockCard.querySelector('.card-content p:first-of-type').textContent = Total Value: ₹${Math.round(stockValue).toLocaleString()};
  stockCard.querySelector('.card-content p:nth-of-type(2)').textContent = Gain/Loss: ${stockGainLoss >= 0 ? '+' : ''}₹${Math.round(stockGainLoss).toLocaleString()};
  stockCard.querySelector('.card-content p:nth-of-type(2)').style.color = stockGainLoss >= 0 ? '#27ae60' : '#e74c3c';
  
  // Update Mutual Funds card
  const mutualFundCard = cards[1];
  const mutualFundGainLoss = mutualFundValue - originalValues.mutualFund;
  mutualFundCard.querySelector('.card-content p:first-of-type').textContent = Total Value: ₹${Math.round(mutualFundValue).toLocaleString()};
  mutualFundCard.querySelector('.card-content p:nth-of-type(2)').textContent = Gain/Loss: ${mutualFundGainLoss >= 0 ? '+' : ''}₹${Math.round(mutualFundGainLoss).toLocaleString()};
  mutualFundCard.querySelector('.card-content p:nth-of-type(2)').style.color = mutualFundGainLoss >= 0 ? '#27ae60' : '#e74c3c';
  
  // Update SIPs card
  const sipCard = cards[2];
  const sipReturn = ((sipValue - originalValues.sip) / originalValues.sip) * 100;
  sipCard.querySelector('.card-content p:first-of-type').textContent = Total Invested: ₹10,000;
  sipCard.querySelector('.card-content p:nth-of-type(2)').textContent = Return: ₹${Math.round(sipValue).toLocaleString()} (${sipReturn >= 0 ? '+' : ''}${sipReturn.toFixed(1)}%);
  sipCard.querySelector('.card-content p:nth-of-type(2)').style.color = sipReturn >= 0 ? '#27ae60' : '#e74c3c';
  
  // Update Bonds card
  const bondsCard = cards[3];
  const bondsGainLoss = bondsValue - originalValues.bonds;
  bondsCard.querySelector('.card-content p:first-of-type').textContent = Total Value: ₹${Math.round(bondsValue).toLocaleString()};
  bondsCard.querySelector('.card-content p:nth-of-type(2)').textContent = Interest Rate: 7.2% p.a.;
  // Add a small indicator for bonds stability
  if (Math.abs(bondsGainLoss) > 500) {
    bondsCard.querySelector('.card-content p:nth-of-type(2)').style.color = bondsGainLoss >= 0 ? '#27ae60' : '#e74c3c';
  }
}

// Interactive Functions
function simulateMarketBurst() {
  stockValue *= 1.15; // 15% increase
  mutualFundValue *= 1.08; // 8% increase
  sipValue *= 1.05; // 5% increase
  bondsValue *= 1.02; // 2% increase (bonds are more stable)
  updateChartAndCards();
  addChatMessage("📈 Market burst simulated! Your portfolio is performing well! Stocks led the rally.", 'bot');
}

function simulateMarketDip() {
  stockValue *= 0.92; // 8% decrease
  mutualFundValue *= 0.95; // 5% decrease
  sipValue *= 0.98; // 2% decrease
  bondsValue *= 1.01; // 1% increase (safe haven effect)
  updateChartAndCards();
  addChatMessage("📉 Market dip simulated. Notice how bonds performed better - this shows diversification benefits!", 'bot');
}

function resetToOriginal() {
  stockValue = originalValues.stock;
  mutualFundValue = originalValues.mutualFund;
  sipValue = originalValues.sip;
  bondsValue = originalValues.bonds;
  updateChartAndCards();
  addChatMessage("🔄 Portfolio values reset to original amounts. Ready for new simulations!", 'bot');
}

function toggleRealTime() {
  isRealTimeActive = !isRealTimeActive;
  const button = document.querySelector('.action-btn:nth-child(4)');
  
  if (isRealTimeActive) {
    button.textContent = '⏸ Pause Updates';
    button.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
    addChatMessage("▶ Real-time updates resumed!", 'bot');
  } else {
    button.textContent = '▶ Resume Updates';
    button.style.background = 'linear-gradient(135deg, #f44336 0%, #d32f2f 100%)';
    addChatMessage("⏸ Real-time updates paused.", 'bot');
  }
}

// Enhanced Chatbot Functions
function toggleChat() {
  const container = document.getElementById('chatbotContainer');
  const toggle = document.getElementById('chatToggle');
  const notification = document.getElementById('chatNotification');
  
  if (container.classList.contains('open')) {
    container.classList.remove('open');
    toggle.style.display = 'flex';
  } else {
    container.classList.add('open');
    toggle.style.display = 'none';
    // Hide notification when chat is opened
    notification.style.display = 'none';
    chatNotificationCount = 0;
  }
}

function clearChat() {
  const messagesContainer = document.getElementById('chatMessages');
  messagesContainer.innerHTML = `
    <div class="message bot-message">
      <div class="message-avatar">🤖</div>
      <div class="message-content">
        <p>Chat cleared! I'm here to help with your investment questions.</p>
        <p>Try asking about your portfolio, goals, or investment strategies!</p>
      </div>
    </div>
  `;
}

function askQuestion(question) {
  const input = document.getElementById('userInput');
  input.value = question;
  sendMessage();
}

function sendMessage() {
  const input = document.getElementById('userInput');
  const message = input.value.trim();
  
  if (message && !isTyping) {
    addChatMessage(message, 'user');
    input.value = '';
    
    // Show typing indicator
    showTypingIndicator();
    
    // Simulate bot response with delay
    setTimeout(() => {
      hideTypingIndicator();
      const response = generateAdvancedBotResponse(message);
      addChatMessage(response, 'bot');
    }, 1000 + Math.random() * 1500); // 1-2.5 second delay
  }
}

function handleEnter(event) {
  if (event.key === 'Enter' && !event.shiftKey) {
    event.preventDefault();
    sendMessage();
  }
}

function showTypingIndicator() {
  isTyping = true;
  const typingIndicator = document.getElementById('typingIndicator');
  typingIndicator.style.display = 'flex';
}

function hideTypingIndicator() {
  isTyping = false;
  const typingIndicator = document.getElementById('typingIndicator');
  typingIndicator.style.display = 'none';
}

function addChatMessage(message, sender) {
  const messagesContainer = document.getElementById('chatMessages');
  const messageDiv = document.createElement('div');
  messageDiv.className = message ${sender}-message;
  
  const avatar = document.createElement('div');
  avatar.className = 'message-avatar';
  avatar.textContent = sender === 'user' ? '👤' : '🤖';
  
  const content = document.createElement('div');
  content.className = 'message-content';
  
  if (typeof message === 'string') {
    content.innerHTML = formatMessage(message);
  } else {
    content.appendChild(message);
  }
  
  messageDiv.appendChild(avatar);
  messageDiv.appendChild(content);
  
  messagesContainer.appendChild(messageDiv);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
  
  // Show notification if chat is closed
  const container = document.getElementById('chatbotContainer');
  if (!container.classList.contains('open') && sender === 'bot') {
    showChatNotification();
  }
}

function formatMessage(message) {
  // Convert markdown-like formatting
  return message
    .replace(/\\(.?)\\*/g, '<strong>$1</strong>')
    .replace(/\(.?)\*/g, '<em>$1</em>')
    .replace(/\n/g, '<br>')
    .replace(/• /g, '<br>• ');
}

function showChatNotification() {
  const notification = document.getElementById('chatNotification');
  chatNotificationCount++;
  notification.textContent = chatNotificationCount;
  notification.style.display = 'flex';
}

// Advanced Investment Bot Response System
function generateAdvancedBotResponse(userMessage) {
  const message = userMessage.toLowerCase();
  
  // Calculate current portfolio stats
  const totalValue = stockValue + mutualFundValue + sipValue + bondsValue;
  const totalOriginal = originalValues.stock + originalValues.mutualFund + originalValues.sip + originalValues.bonds;
  const overallReturn = ((totalValue - totalOriginal) / totalOriginal) * 100;
  
  // Response patterns with keywords and functions
  if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
    return Hello! 👋 I'm your AI Investment Assistant. Your portfolio is currently worth **₹${Math.round(totalValue).toLocaleString()}** with a **${overallReturn >= 0 ? '+' : ''}${overallReturn.toFixed(2)}%** return. How can I help you today?;
  }
  
  if (message.includes('portfolio') || message.includes('total') || message.includes('worth') || message.includes('value')) {
    const bestPerformer = stockValue > mutualFundValue ? 'Stocks' : stockValue > sipValue ? 'Stocks' : 'SIPs';
    return `📊 *Portfolio Overview:*
    
*Total Value:* ₹${Math.round(totalValue).toLocaleString()}
*Overall Return:* ${overallReturn >= 0 ? '+' : ''}${overallReturn.toFixed(2)}%
*Asset Distribution:*
• Stocks: ₹${Math.round(stockValue).toLocaleString()} (${((stockValue/totalValue)*100).toFixed(1)}%)
• Mutual Funds: ₹${Math.round(mutualFundValue).toLocaleString()} (${((mutualFundValue/totalValue)*100).toFixed(1)}%)
• SIPs: ₹${Math.round(sipValue).toLocaleString()} (${((sipValue/totalValue)*100).toFixed(1)}%)
• Bonds & FDs: ₹${Math.round(bondsValue).toLocaleString()} (${((bondsValue/totalValue)*100).toFixed(1)}%)

*Best Performer:* ${bestPerformer} 🏆

Your portfolio shows excellent diversification!`;
  }
  
  if (message.includes('stock') || message.includes('equity') || message.includes('shares')) {
    const stockReturn = ((stockValue - originalValues.stock) / originalValues.stock) * 100;
    const advice = stockReturn > 15 ? 'Consider booking partial profits' : stockReturn < -10 ? 'Good time to average down' : 'Hold for long-term growth';
    return `🏢 *Stock Portfolio Analysis:*

*Current Value:* ₹${Math.round(stockValue).toLocaleString()}
*Return:* ${stockReturn >= 0 ? '+' : ''}${stockReturn.toFixed(2)}%
*Portfolio Weight:* ${((stockValue/totalValue)*100).toFixed(1)}%

*Top Holdings:* TCS, Infosys, HDFC Bank

*Recommendation:* ${advice}

*Stock investments work best with 5+ year horizon.*`;
  }
  
  if (message.includes('mutual fund') || message.includes('mf') || message.includes('fund')) {
    const mfReturn = ((mutualFundValue - originalValues.mutualFund) / originalValues.mutualFund) * 100;
    return `📊 *Mutual Fund Analysis:*

*Current Value:* ₹${Math.round(mutualFundValue).toLocaleString()}
*Return:* ${mfReturn >= 0 ? '+' : ''}${mfReturn.toFixed(2)}%
*Holdings:* SBI Blue Chip, ICICI Prudential

*Benefits:*
• Professional management
• Diversification
• Lower risk than direct equity
• Systematic investing

*Tip:* Review performance annually and switch if underperforming.`;
  }
  
  if (message.includes('sip') || message.includes('systematic')) {
    const sipReturn = ((sipValue - originalValues.sip) / originalValues.sip) * 100;
    return `💰 *SIP Investment Analysis:*

*Current Value:* ₹${Math.round(sipValue).toLocaleString()}
*Return:* ${sipReturn >= 0 ? '+' : ''}${sipReturn.toFixed(2)}%
*Monthly Investment:* ₹2,500
*Duration:* 4 months

*SIP Benefits:*
• Rupee cost averaging
• Disciplined investing
• Compound interest power
• No market timing needed

*Suggestion:* Consider increasing SIP by ₹500-1000 monthly!`;
  }
  
  if (message.includes('bond') || message.includes('fd') || message.includes('fixed deposit') || message.includes('debt')) {
    return `🏛 *Bonds & Fixed Deposits:*

*Current Value:* ₹${Math.round(bondsValue).toLocaleString()}
*Interest Rate:* 7.2% p.a.
*Risk Level:* Low

*Why bonds matter:*
• Capital preservation
• Steady income
• Portfolio stability
• Inflation protection

Your debt allocation provides stability during volatility!`;
  }
  
  if (message.includes('goal') || message.includes('target') || message.includes('dream') || message.includes('education') || message.includes('retirement') || message.includes('home')) {
    const dreamHomeProgress = Math.round((totalValue / 5000000) * 100);
    const educationProgress = Math.round((totalValue / 2500000) * 100);
    const retirementProgress = Math.round((totalValue / 20000000) * 100);
    
    return `🎯 *Goal Analysis:*

*Dream Home (₹50L target):* ${Math.min(dreamHomeProgress, 100)}% complete
*Child Education (₹25L target):* ${Math.min(educationProgress, 100)}% complete  
*Retirement Fund (₹2Cr target):* ${Math.min(retirementProgress, 100)}% complete

*To accelerate goals:*
• Increase SIP by ₹1000 monthly
• Consider ELSS for tax savings
• Review goals annually
• Stay invested during volatility

*Time is your biggest ally in wealth creation!*`;
  }
  
  if (message.includes('advice') || message.includes('suggest') || message.includes('recommend') || message.includes('what should') || message.includes('help')) {
    const suggestions = [
      **Diversification Tip:** Consider international funds (5-10% allocation) for global exposure.,
      **Tax Optimization:** ELSS mutual funds can save up to ₹46,800 in taxes annually.,
      **Rebalancing:** Your allocation looks good, but review every 6 months.,
      **Emergency Fund:** Ensure 6-12 months expenses in liquid funds.,
      **SIP Boost:** Increase SIP by ₹500-1000 to reach goals faster.,
      **Sector Play:** Healthcare and renewable energy show long-term promise.
    ];
    return suggestions[Math.floor(Math.random() * suggestions.length)];
  }
  
  if (message.includes('risk') || message.includes('risky') || message.includes('safe') || message.includes('volatile')) {
    return `⚖ *Risk Assessment:*

*Your Risk Profile:* Moderate
*Current Allocation:* 
• High Risk (Stocks): ${((stockValue/totalValue)*100).toFixed(1)}%
• Medium Risk (MF, SIP): ${(((mutualFundValue+sipValue)/totalValue)*100).toFixed(1)}%
• Low Risk (Bonds): ${((bondsValue/totalValue)*100).toFixed(1)}%

*Risk Management Tips:*
• Never invest borrowed money
• Diversify across asset classes
• Maintain emergency fund
• Avoid panic selling
• Regular portfolio review

*Your diversified approach manages risk effectively!*`;
  }
  
  if (message.includes('tax') || message.includes('elss') || message.includes('80c') || message.includes('save')) {
    return `💸 *Tax Optimization:*

*Current Tax-Saving Options:*
• ELSS Mutual Funds (₹1.5L limit)
• PPF (₹1.5L limit)
• Life Insurance (₹1.5L limit)
• Home Loan Principal (₹1.5L limit)

*ELSS Benefits:*
• 3-year lock-in (shortest)
• Higher return potential
• Tax saving + wealth creation

*Suggestion:* ₹1000 monthly ELSS SIP for tax efficiency!`;
  }
  
  // Default intelligent response
  return `I understand you're interested in "${userMessage}". I can help you with:

• *Portfolio Analysis* - Performance and breakdown
• *Investment Strategy* - Advice and recommendations
• *Goal Planning* - Tracking and optimization
• *Risk Management* - Assessment and tips
• *Tax Planning* - Optimization strategies

What specific area would you like to explore?`;
}

// Report Generation Function
function downloadReport() {
  const totalValue = stockValue + mutualFundValue + sipValue + bondsValue;
  const totalOriginal = originalValues.stock + originalValues.mutualFund + originalValues.sip + originalValues.bonds;
  const overallReturn = ((totalValue - totalOriginal) / totalOriginal) * 100;
  
  const reportContent = generateReportContent(totalValue, overallReturn);
  
  // Create and download the report
  const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
  const url = window.URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = Investment_Report_${new Date().toISOString().split('T')[0]}.txt;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  window.URL.revokeObjectURL(url);
  
  // Show success message in chat
  addChatMessage('📄 *Investment report downloaded successfully!* Check your downloads folder for the detailed analysis.', 'bot');
}

function generateReportContent(totalValue, overallReturn) {
  const currentDate = new Date().toLocaleDateString('en-IN');
  const stockReturn = ((stockValue - originalValues.stock) / originalValues.stock) * 100;
  const mfReturn = ((mutualFundValue - originalValues.mutualFund) / originalValues.mutualFund) * 100;
  const sipReturn = ((sipValue - originalValues.sip) / originalValues.sip) * 100;
  
  return `
═══════════════════════════════════════════════════════════════
                    INVESTMENT PORTFOLIO REPORT
═══════════════════════════════════════════════════════════════

Report Generated: ${currentDate}
Portfolio Owner: Investment Dashboard User

───────────────────────────────────────────────────────────────
                     PORTFOLIO OVERVIEW
───────────────────────────────────────────────────────────────

Total Portfolio Value: ₹${Math.round(totalValue).toLocaleString()}
Overall Return: ${overallReturn >= 0 ? '+' : ''}${overallReturn.toFixed(2)}%
Investment Status: ${overallReturn >= 0 ? 'Profitable' : 'At Loss'}

───────────────────────────────────────────────────────────────
                    ASSET BREAKDOWN
───────────────────────────────────────────────────────────────

1. STOCK PORTFOLIO
   Current Value: ₹${Math.round(stockValue).toLocaleString()}
   Original Investment: ₹${originalValues.stock.toLocaleString()}
   Return: ${stockReturn >= 0 ? '+' : ''}${stockReturn.toFixed(2)}%
   Portfolio Weight: ${((stockValue/totalValue)*100).toFixed(1)}%
   Top Holdings: TCS, Infosys, HDFC Bank

2. MUTUAL FUNDS
   Current Value: ₹${Math.round(mutualFundValue).toLocaleString()}
   Original Investment: ₹${originalValues.mutualFund.toLocaleString()}
   Return: ${mfReturn >= 0 ? '+' : ''}${mfReturn.toFixed(2)}%
   Portfolio Weight: ${((mutualFundValue/totalValue)*100).toFixed(1)}%
   Holdings: SBI Blue Chip, ICICI Prudential

3. SYSTEMATIC INVESTMENT PLANS (SIP)
   Current Value: ₹${Math.round(sipValue).toLocaleString()}
   Original Investment: ₹${originalValues.sip.toLocaleString()}
   Return: ${sipReturn >= 0 ? '+' : ''}${sipReturn.toFixed(2)}%
   Portfolio Weight: ${((sipValue/totalValue)*100).toFixed(1)}%
   Monthly SIP: ₹2,500 | Duration: 4 months

4. BONDS & FIXED DEPOSITS
   Current Value: ₹${Math.round(bondsValue).toLocaleString()}
   Original Investment: ₹${originalValues.bonds.toLocaleString()}
   Interest Rate: 7.2% p.a.
   Portfolio Weight: ${((bondsValue/totalValue)*100).toFixed(1)}%
   Type: Government Bonds, Bank FDs

───────────────────────────────────────────────────────────────
                    INVESTMENT GOALS PROGRESS
───────────────────────────────────────────────────────────────

🏠 Dream Home (Target: ₹50,00,000)
   Progress: ${Math.min(Math.round((totalValue / 5000000) * 100), 100)}% Complete
   Amount Achieved: ₹${Math.round(totalValue).toLocaleString()}

🎓 Child Education (Target: ₹25,00,000)
   Progress: ${Math.min(Math.round((totalValue / 2500000) * 100), 100)}% Complete
   Amount Achieved: ₹${Math.round(totalValue).toLocaleString()}

🌴 Retirement Fund (Target: ₹2,00,00,000)
   Progress: ${Math.min(Math.round((totalValue / 20000000) * 100), 100)}% Complete
   Amount Achieved: ₹${Math.round(totalValue).toLocaleString()}

───────────────────────────────────────────────────────────────
                    PERFORMANCE METRICS
───────────────────────────────────────────────────────────────

Portfolio Return (12 months): +12.5%
Risk Level: Moderate
Asset Allocation: Balanced (60% Equity, 40% Debt)
Diversification Score: Good (8 different sectors)

Best Performing Asset: ${stockValue > mutualFundValue ? 'Stocks' : stockValue > sipValue ? 'Stocks' : 'SIPs'}
Most Stable Asset: Bonds & Fixed Deposits

───────────────────────────────────────────────────────────────
                    RECOMMENDATIONS
───────────────────────────────────────────────────────────────

✓ Diversify beyond tech-sector stocks
✓ Increase SIP allocation for long-term goals
✓ Monitor mutual fund performance quarterly
✓ Rebalance portfolio every 6 months
✓ Consider adding debt funds for stability
✓ Explore international diversification

───────────────────────────────────────────────────────────────
                    RISK ANALYSIS
───────────────────────────────────────────────────────────────

Current Risk Profile: Moderate
High Risk Assets: ${((stockValue/totalValue)*100).toFixed(1)}% (Stocks)
Medium Risk Assets: ${(((mutualFundValue+sipValue)/totalValue)*100).toFixed(1)}% (MF + SIP)
Low Risk Assets: ${((bondsValue/totalValue)*100).toFixed(1)}% (Bonds & FDs)

Risk Management: Well diversified across asset classes

───────────────────────────────────────────────────────────────

Report Disclaimer: This report is generated based on current portfolio 
values and market data. Past performance does not guarantee future results. 
Please consult with a certified financial advisor for personalized advice.

Generated by: AI Investment Dashboard
Report Version: 1.0
Next Review Date: ${new Date(Date.now() + 90*24*60*60*1000).toLocaleDateString('en-IN')}

═══════════════════════════════════════════════════════════════
`;
}

// Update data every 3 seconds for real-time simulation
updateInterval = setInterval(updateInvestmentData, 3000);

// Add a visual indicator for real-time updates
function addRealTimeIndicator() {
  const header = document.querySelector('header h1');
  const indicator = document.createElement('span');
  indicator.textContent = ' 🔴 LIVE';
  indicator.style.fontSize = '0.6em';
  indicator.style.color = '#ff4444';
  indicator.style.animation = 'blink 1.5s infinite';
  header.appendChild(indicator);
  
  // Add CSS animation for blinking effect
  const style = document.createElement('style');
  style.textContent = `
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0.3; }
    }
  `;
  document.head.appendChild(style);
}

// Initialize real-time indicator and welcome message
addRealTimeIndicator();

// Add welcome message to chat after page loads
setTimeout(() => {
  addChatMessage('💡 Try the Quick Actions buttons or ask me anything about investments!', 'bot');
}, 2000);
</script>
</html>